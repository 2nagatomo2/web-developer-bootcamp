# オブジェクト指向プログラミング

## プロトタイプオブジェクト

- 全てのオブジェクトで，共通で使うことができるメソッドを集めたもの
- `object.prototype`を見ると，共通のメソッドオブジェクトを見ることができる
- `__prpto__`は prototype オブジェクトのポインタ
- 全てのオブジェクトはプロトタイプの参照を持つ
- ```javascript
  [3, 4, 5].__prpto__;
  ```
  とすると，sort や concat などの array オブジェクトがデフォルトでもつ関数のオブジェクトが見られる

## ファクトリー関数

- オブジェクトの雛形となる関数
- 呼び出すたびに新しいオブジェクトを生成できる関数のこと
- 関数の中でプロパティとなる変数や関数を定義する
- 関数がプロパティに直接定義される（プロトタイプオブジェクトに定義されるわけではない）

### ファクトリー関数のデメリット

- プロパティとなる関数は同じものなのに何度も新しく生成されてしまう．

## コンストラクタ関数

- その他の言語のコンストラクタと少し違う
- `new`演算子を使って呼ぶことで，新しいオブジェクトが生成される．
- `Object.prototype.hoge = function() {~}`のようにすれば，何度も共通の関数を定義することなく，プロトタイプ経由で関数を呼び出せる

### `new`演算子

1. 空のプレーンな JavaScript オブジェクトを生成します。
2. 新しいオブジェクトにプロパティ (**proto**) を追加し、コンストラクター関数のプロトタイプオブジェクトに結びつけます。
   - メモ: コンストラクター関数のプロトタイプに追加されたプロトタイプやオブジェクトは、そのためそのコンストラクター関数で（new を使用して）生成されたすべてのインスタンスからアクセスできます。
3. 新しく生成されたオブジェクトインスタンスを this コンテキストとして結びつけます。 （すなわち、コンストラクター関数内の this へのすべての参照は、最初のステップで作成されたオブジェクトを参照するようになります。）
4. 関数がオブジェクトを返さない場合は this を返します。

## JavaScript の class

- class 宣言はコンストラクタ関数と prototype 宣言の syntax sugar
- class キーワードの後ろにクラス名をかく
- `constructor()`class のインスタンスができる時に自動的に呼ばれる関数．初期化関数
- class 内に関数を定義すると，クラスの prototype に定義される

### extends と super

**継承**

- 親クラスに定義した共通の処理を子クラスに受け継ぐことができる
- `class Child extends Parent`のようにすると，子クラスが親クラスのプロパティやメソッドを継承できる
- 子クラスでメソッドのオーバーライドが行われると，メソッドが書き換えられる．
- コンストラクタ関数の中で`super`を入れると，親クラスのコンストラクタを参照しながら，子クラスの独自のコンストラクタを作ることができる
